# Домашнее задание к занятию «2.3 gRPC (часть 1)»

Все задачи этого занятия нужно делать в **разных репозиториях**.

В качестве результата пришлите ссылки на ваши GitHub-проекты через личный кабинет студента на сайте [netology.ru](https://netology.ru).

**Важно**: если у вас что-то не получилось, то оформляйте Issue [по установленным правилам](../report-requirements.md).

**ВАЖНО**: НИ В КОЕМ СЛУЧАЕ НЕ ПОДСТАВЛЯЙТЕ ДАННЫЕ СВОИХ РЕАЛЬНЫХ КАРТ В КОД! Это очень частая "оплошность": разработчики случайно коммитят и заливают на GitHub "чувствительные" (sensitive) данные (ключи, логины, пароли, адреса и т.д.). Используйте генераторы вроде: https://www.freeformatter.com/credit-card-number-generator-validator.html

Если вы всё же "случайно" залили чувствительные данные на GitHub, то используйте [инструкцию по удалению данных](https://help.github.com/en/github/authenticating-to-github/removing-sensitive-data-from-a-repository). Кроме того, как бы это печально ни было, рекомендуем вам заблокировать карту и заказать в банке новую.

## Как сдавать задачи

1. Создайте на вашем компьютере Go-модуль (см. доп.видео к первой лекции).
1. Добавьте в него в качестве зависимостей pgx и всё, что нужно для создания gRPC сервера и клиента.
1. Инициализируйте в нём пустой Git-репозиторий.
1. Добавьте в него готовый файл [.gitignore](../.gitignore).
1. Добавьте в этот же каталог остальные необходимые файлы (убедитесь, что они аккуратно разложены по пакетам).
1. Сделайте необходимые коммиты.
1. Создайте публичный репозиторий на GitHub и свяжите свой локальный репозиторий с удалённым.
1. Сделайте пуш (удостоверьтесь, что ваш код появился на GitHub).
1. Ссылку на ваш проект отправьте в личном кабинете на сайте [netology.ru](https://netology.ru).
1. Задачи, отмеченные как необязательные, можно не сдавать, это не повлияет на получение зачета (в этом ДЗ все задачи являются обязательными).

## Шаблоны платежей

### Легенда

<details>
<summary>Легенда</summary>

Банки часто предлагают пользователям создать шаблон платежа (для часто совершаемых платежей), чтобы ускорить процесс оплаты (и зачастую, упростить, т.к. упрощается процедура подтверждения платежа с точки зрения безопасности).

Например, как это организовано в Интернет Банке Тинькофф:

1\. Выбор типа шаблона

![](pic/template01.png)

2\. Создание автоплатежа (для примера - пополнение счёта моб.телефона)

![](pic/template02.png)

3\. Работа с автоплатежом:

![](pic/template03.png)

</details>

### Задача

Реализуйте gRPC сервер и gRPC клиент в одном проекте (для них должны быть разные бинарники, формируемые из `cmd`), реализующие CRUD-функциональность для создания шаблона пополнения счёта моб.телефона.

По факту, вам нужно сделать базовый CRUD:
* создание шаблона
* получение списка всех шаблонов
* получение шаблона по id
* редактирование
* удаление

О механизмах безопасности можете не думать.

Шаблон автоплатежа пополнения счёта моб.телефона - сущность, у которой есть следующие поля:
* id
* название
* номер телефона
* дата создания
* дата обновления

Сами шаблоны должны храниться в БД PostgreSQL.

**Важно**: ключевое в этом ДЗ - научиться формировать .proto-файлы и генерировать сервер и клиент, по поводу бизнес-логики (могут быть автоплатежи и за дургие услуги, как их хранить в БД) можете не "заморачиваться".

Итого:
1. Вы пишете .proto-файлы, описывающие требуемые CRUD-операции, типы сообщений - на ваше усмотрение
1. Вы генерируете на основании `.proto` файлы `*.pb.go`, содержащие интерфейсы для клиента и сервера (всё как на лекции)
1. Вы пишете реализацию сервера - `cmd/templates/server`
1. Вы пишете реализацию клиента - `cmd/templates/client` с демонстрацией всех запросов:
    * создание
    * получение списка
    * получение по id
    * редактирование по id
    * удаление по id

Сгенерированные в результате работы `protoc`-файлы также должны присутствовать в Git-репозитории.

В качестве результата пришлите ссылку на ваш GitHub-проект, в котором реализованы описанные выше требования.

## Тинькофф VoiceKit

**Важно**: это не задача, это лишь описание живого production сервиса, на котором вы можете потренироваться в использовании gRPC.

### Описание

Тинькофф предоставляет сервис под названием [VoiceKit](https://voicekit.tinkoff.ru), позволяющий распознавать речь (и синтезировать её по тексту).

Вы можете получить демо-доступ, заполнив форму [на странице заявки](https://voicekit.tinkoff.ru). В заявке обязательно укажите, что вам нужен **бесплатный доступ в учебных целях**.

Отвечают обычно в течение рабочего дня, присылая вам на Email письмо вида:

![](pic/voicekit.png)

Репозиторий с примерами использования расположен по адресу https://github.com/TinkoffCreditSystems/voicekit-examples (Go там тоже есть).

Непосредственно сами .proto-файлы: https://github.com/TinkoffCreditSystems/voicekit-examples/tree/master/apis_ru/tinkoff/cloud

Вам нужно сгенерировать на их основании клиент и попробовать использовать данный сервис.

**Важно**: присылать это в качестве ДЗ не нужно, если у вас возникнут вопросы или проблемы, тегайте `coursar` в общем чате в Slack.
